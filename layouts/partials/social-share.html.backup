{{- if .Site.Params.socialShare -}}
<style>
.social-share {
    display: flex;
    align-items: center;
    justify-content: flex-start;
    gap: 15px;
    margin-top: 2rem;
    padding-top: 1rem;
    border-top: 1px solid #eee;
}
.social-share-title {
    font-size: 1rem;
    font-weight: bold;
    margin-right: 10px;
}
.social-share a {
    display: inline-block;
    width: 32px;
    height: 32px;
    border-radius: 50%;
    padding: 6px;
    background-color: #f0f0f0;
    transition: background-color 0.3s;
    text-decoration: none;
    color: #333;
    box-sizing: border-box;
}
.social-share a:hover {
    background-color: #e0e0e0;
}
.social-share svg {
    width: 100%;
    height: 100%;
}

/* WeChat QR Code Modal Styles */
.wechat-qr-modal {
    display: none;
    position: fixed;
    z-index: 1000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0,0,0,0.5);
    justify-content: center;
    align-items: center;
}
.wechat-qr-modal-content {
    background-color: white;
    padding: 20px;
    border-radius: 8px;
    text-align: center;
    position: relative;
    max-width: 300px;
    width: 90%;
}
.wechat-qr-modal-close {
    position: absolute;
    top: 10px;
    right: 15px;
    font-size: 24px;
    font-weight: bold;
    cursor: pointer;
    color: #999;
}
.wechat-qr-modal-close:hover {
    color: #333;
}
#wechat-qr-code {
    max-width: 200px;
    height: auto;
    margin-top: 10px;
}
</style>

<div class="social-share">
    <span class="social-share-title">分享到:</span>
    <!-- X (Twitter) -->
    <a href="https://twitter.com/intent/tweet?url={{ .Permalink }}&text={{ .Title | urlquery }}" target="_blank" rel="noopener" title="分享到 X">
        <svg viewBox="0 0 24 24"><path fill="currentColor" d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
    </a>
    <!-- Weibo -->
    <a href="http://service.weibo.com/share/share.php?url={{ .Permalink }}&title={{ .Title | urlquery }}" target="_blank" rel="noopener" title="分享到微博">
        <svg viewBox="0 0 24 24"><path fill="currentColor" d="M20.83 5.25c.28-.42.07-.98-.38-1.22s-1-.05-1.23.38c-1.03 1.8-2.13 3.2-3.43 4.28A9.3 9.3 0 0 0 12.5 8c-2.38 0-4.4 1.1-5.7 2.78c-1.3 1.68-2 3.7-2 5.72c0 4.4 3.53 8 7.83 8s7.84-3.6 7.84-8c0-1.93-.6-3.7-1.72-5.18c-.1-.14-.08-.33.04-.44c.12-.1.3-.1.4-.02c1.3 1.12 2.1 2.73 2.1 4.54c0 3.3-2.63 6-5.84 6s-5.83-2.7-5.83-6c0-1.6.55-3.1 1.55-4.28c1-1.17 2.4-1.82 4-1.82c1.3 0 2.5.5 3.43 1.32c1.25-.96 2.43-2.43 3.5-4.38M15 16.5c0 1.4-1.12 2.5-2.5 2.5S10 17.9 10 16.5S11.12 14 12.5 14s2.5 1.1 2.5 2.5m-3-1c-.28 0-.5.22-.5.5s.22.5.5.5s.5-.22.5-.5s-.22-.5-.5-.5m3 0c-.28 0-.5.22-.5.5s.22.5.5.5s.5-.22.5-.5s-.22-.5-.5-.5"/></svg>
    </a>
    <!-- WeChat -->
    <a href="javascript:void(0);" id="wechat-share-btn" title="分享到微信">
        <svg viewBox="0 0 24 24"><path fill="currentColor" d="M19.5 14.5c.28 0 .5.22.5.5s-.22.5-.5.5h-1c-.28 0-.5-.22-.5-.5s.22-.5.5-.5zm-3 0c.28 0 .5.22.5.5s-.22.5-.5.5h-1c-.28 0-.5-.22-.5-.5s.22-.5.5-.5zm-9-4c.28 0 .5.22.5.5s-.22.5-.5.5H6.5c-.28 0-.5-.22-.5-.5s.22-.5.5-.5zm3 0c.28 0 .5.22.5.5s-.22.5-.5.5h-1c-.28 0-.5-.22-.5-.5s.22-.5.5-.5zm-6.5 8.5c-2.53 0-4.61-1.92-4.94-4.36c-.04-.3.18-.57.48-.57c.25 0 .46.18.5.42c.28 1.88 1.85 3.31 3.82 3.31c.45 0 .88-.07 1.29-.2c.22-.07.46.02.58.22l.62.9c.15.22.1.5-.1.65c-.5.38-1.07.66-1.68.81c-.04.01-.07.02-.11.02m13.5-9.5c-3.63 0-6.68 2.56-7.33 5.89c-.06.28.15.54.43.54c.23 0 .43-.16.48-.39c.5-2.72 2.98-4.84 5.8-4.84c1.45 0 2.78.48 3.82 1.28c.18.14.45.1.57-.1l.73-.93c.16-.2.14-.5-.05-.66c-1.23-.98-2.8-1.59-4.55-1.59M6.11 20.11c.18.16.45.15.61-.02l.73-.8c.16-.17.14-.45-.04-.6c-.93-.8-1.5-1.9-1.5-3.09c0-2.48 2.02-4.5 4.5-4.5s4.5 2.02 4.5 4.5c0 .3-.02.6-.07.88c-.06.28.15.54.43.54c.24 0 .45-.17.5-.4c.06-.3.1-.6.1-.92c0-3.03-2.47-5.5-5.5-5.5s-5.5 2.47-5.5 5.5c0 1.48.58 2.82 1.54 3.82z"/></svg>
    </a>
</div>

<!-- WeChat QR Code Modal -->
<div id="wechat-qr-modal" class="wechat-qr-modal">
    <span class="wechat-qr-modal-close" id="wechat-qr-modal-close">&times;</span>
    <div class="wechat-qr-modal-content">
        <p>打开微信"扫一扫"，打开网页后点击屏幕右上角"分享"</p>
        <img id="wechat-qr-code" src="" alt="WeChat QR Code" />
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    var wechatBtn = document.getElementById('wechat-share-btn');
    var modal = document.getElementById('wechat-qr-modal');
    var closeBtn = document.getElementById('wechat-qr-modal-close');
    var qrCodeImg = document.getElementById('wechat-qr-code');

    if (wechatBtn && modal && closeBtn && qrCodeImg) {
        wechatBtn.addEventListener('click', function() {
            // Use a QR code generation API. This one is from qrserver.
            var pageUrl = "{{ .Permalink }}";
            qrCodeImg.src = "https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=" + encodeURIComponent(pageUrl);
            modal.style.display = 'flex';
        });

        closeBtn.addEventListener('click', function() {
            modal.style.display = 'none';
        });

        window.addEventListener('click', function(event) {
            if (event.target == modal) {
                modal.style.display = 'none';
            }
        });
    }
});
</script>
{{- end -}}